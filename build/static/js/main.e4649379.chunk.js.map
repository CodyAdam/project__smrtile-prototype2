{"version":3,"sources":["Editing/Helper.js","Editing/Tile.js","Editing/Layer.js","Editing/Tools/Tool.js","Editing/Tools/Camera.js","Editing/Tools/Brush.js","Editing/EditingArea.js","PanelArea.js","TitleArea.js","ToolBarArea.js","index.js","assets/frame/cross.svg","assets/tileset/test.png"],"names":["getCoordinateAt","mousePos","grid","offset","x","mod","size","y","n","m","getMouseInCanvas","mousePosInWindow","container","Tile","sprite","this","delete","state","context","canvas","getContext","isTileOnScreen","drawImage","topLeft","bottomRight","width","height","GridTile","useDot","dotSize","crossSize","opacity","color","beginPath","fillStyle","arc","Math","PI","globalAlpha","fill","fillRect","Layer","name","layout","initLayout","active","tile","isMouseOnLayer","destroy","render","Array","length","layers","i","Grid","initGrid","value","forEach","subTab","gridTile","Tool","tools","Object","entries","tool","Camera","click","left","middle","right","lastMouse","scrollSensivity","e","which","pageX","pageY","setState","map","ative","mouse","scrollValue","sign","deltaY","before","round","minSize","maxSize","after","Brush","coordinateAtMouse","placeAt","eraseAt","pos","getActive","setAt","makeLine","start","end","isPlacing","difX","difY","dist","abs","floor","dx","dy","ceil","EditingArea","props","div","Image","src","tileImg","brush","camera","refs","window","addEventListener","handleResize","bind","handleWheel","handleMouseDown","handleMouseMove","handleMouseUp","handleMouseLeave","document","oncontextmenu","onStart","offsetWidth","offsetHeight","updateLayers","clearRect","splice","w","h","containerOffset","offsetLeft","offsetTop","onWheel","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","id","ref","React","Component","PanelArea","title","description","className","TitleArea","minimize","onMinimize","maximize","onMaximize","close","onClose","frame_cross","alt","ToolBarArea","TileButton","App","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.e4649379.chunk.js","sourcesContent":["export function getCoordinateAt(mousePos, grid) {\r\n    const offset = grid.offset;\r\n    const x = (mousePos.x - offset.x - mod(mousePos.x - offset.x, grid.size)) / grid.size;\r\n    const y = (mousePos.y - offset.y - mod(mousePos.y - offset.y, grid.size)) / grid.size;\r\n\r\n    return { x: x, y: y };\r\n}\r\n\r\nfunction mod(n, m) {\r\n    return ((n % m) + m) % m;\r\n}\r\n\r\nexport function getMouseInCanvas(mousePosInWindow, container) {\r\n    return {\r\n        x: mousePosInWindow.x - container.offset.x,\r\n        y: mousePosInWindow.y - container.offset.y,\r\n    };\r\n}\r\n","import { getCoordinateAt } from \"./Helper\";\r\n\r\nexport default class Tile {\r\n\tconstructor(sprite, x, y) {\r\n\t\tthis.sprite = sprite;\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tstatic isTileOnScreen(x, y, state) {\r\n\t\tlet topLeft = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t};\r\n\t\tlet bottomRight = {\r\n\t\t\tx: state.container.width,\r\n\t\t\ty: state.container.height\r\n\t\t};\r\n\r\n\t\ttopLeft = getCoordinateAt(topLeft, state.grid);\r\n\t\tbottomRight = getCoordinateAt(bottomRight, state.grid);\r\n\r\n\t\ttopLeft.x += -1;\r\n\t\ttopLeft.y += -1;\r\n\t\tbottomRight.x -= -1;\r\n\t\tbottomRight.y -= -1;\r\n\r\n\t\tif (x < topLeft.x || x > bottomRight.x || y < topLeft.y || y > bottomRight.y) return false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.delete = true;\r\n\t}\r\n\r\n\trender(state) {\r\n\t\tconst context = state.container.canvas.getContext(\"2d\");\r\n\t\tconst grid = state.grid;\r\n\t\tconst offset = grid.offset;\r\n\r\n\t\tif (!Tile.isTileOnScreen(this.x, this.y, state)) return;\r\n\r\n\t\tcontext.drawImage(\r\n\t\t\tthis.sprite,\r\n\t\t\toffset.x + this.x * grid.size,\r\n\t\t\toffset.y + this.y * grid.size,\r\n\t\t\tgrid.size,\r\n\t\t\tgrid.size\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class GridTile extends Tile {\r\n\tconstructor(x, y) {\r\n\t\tsuper(null, x, y);\r\n\t\tthis.useDot = null;\r\n\t\tthis.dotSize = null;\r\n\t\tthis.crossSize = null;\r\n\t\tthis.opacity = null;\r\n\t\tthis.color = null;\r\n\t}\r\n\r\n\trender(state) {\r\n\t\tconst context = state.container.canvas.getContext(\"2d\");\r\n\t\tconst grid = state.grid;\r\n\t\tconst offset = grid.offset;\r\n\r\n\t\tif (!Tile.isTileOnScreen(this.x, this.y, state)) return;\r\n\t\tif (this.useDot) {\r\n\t\t\tcontext.beginPath();\r\n\t\t\tcontext.fillStyle = this.color;\r\n\t\t\tcontext.arc(\r\n\t\t\t\toffset.x + this.x * grid.size,\r\n\t\t\t\toffset.y + this.y * grid.size,\r\n\t\t\t\t(grid.size * this.dotSize) / 2,\r\n\t\t\t\t0,\r\n\t\t\t\t2 * Math.PI,\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tcontext.globalAlpha = this.opacity;\r\n\t\t\tcontext.fill();\r\n\t\t\tcontext.globalAlpha = 1;\r\n\t\t} else {\r\n\t\t\tcontext.fillStyle = this.color;\r\n\t\t\tcontext.globalAlpha = this.opacity;\r\n\t\t\tcontext.fillRect(\r\n\t\t\t\toffset.x + grid.size * (this.x - 0.5),\r\n\t\t\t\toffset.y + grid.size * (this.y - 0.5 + (0.5 - this.crossSize / 2)),\r\n\t\t\t\tgrid.size,\r\n\t\t\t\tgrid.size * this.crossSize\r\n\t\t\t);\r\n\t\t\tcontext.fillRect(\r\n\t\t\t\toffset.x + grid.size * (this.x - 0.5 + (0.5 - this.crossSize / 2)),\r\n\t\t\t\toffset.y + grid.size * (this.y - 0.5),\r\n\t\t\t\tgrid.size * this.crossSize,\r\n\t\t\t\tgrid.size * (0.5 - this.crossSize * 0.5)\r\n\t\t\t);\r\n\t\t\tcontext.fillRect(\r\n\t\t\t\toffset.x + grid.size * (this.x - 0.5 + (0.5 - this.crossSize / 2)),\r\n\t\t\t\toffset.y + grid.size * (this.y + this.crossSize * 0.5),\r\n\t\t\t\tgrid.size * this.crossSize,\r\n\t\t\t\tgrid.size * (0.5 - this.crossSize * 0.5)\r\n\t\t\t);\r\n\t\t\tcontext.globalAlpha = 1;\r\n\t\t}\r\n\t}\r\n}\r\n","import { GridTile } from \"./Tile\";\r\n\r\nexport class Layer {\r\n\tconstructor(name, width, height) {\r\n\t\tthis.name = name;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.layout = Layer.initLayout(width, height);\r\n\t\tthis.active = true;\r\n\t}\r\n\r\n\tsetAt(tile, x, y) {\r\n\t\tif (this.isMouseOnLayer(x, y)) this.layout[x][y] = tile;\r\n\t}\r\n\r\n\tgetAt(x, y) {\r\n\t\treturn this.layout[x][y];\r\n\t}\r\n\r\n\teraseAt(x, y) {\r\n\t\tif (this.isMouseOnLayer(x, y) && this.layout[x][y] !== null) {\r\n\t\t\tthis.layout[x][y].destroy();\r\n\t\t\tthis.layout[x][y] = null;\r\n\t\t}\r\n\t}\r\n\r\n\tisMouseOnLayer(x, y) {\r\n\t\treturn x >= 0 && y >= 0 && x < this.width && y < this.height;\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.delete = true;\r\n\t}\r\n\r\n\trender(state) {\r\n\t\tfor (let x = 0; x < this.width; x++) {\r\n\t\t\tfor (let y = 0; y < this.height; y++) {\r\n\t\t\t\tif (this.layout[x][y] !== null) this.layout[x][y].render(state);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic initLayout(width, height) {\r\n\t\tlet layout;\r\n\t\tlayout = new Array(width);\r\n\t\tfor (let x = 0; x < layout.length; x++) {\r\n\t\t\tlayout[x] = new Array(height);\r\n\t\t\tfor (let y = 0; y < layout[x].length; y++) {\r\n\t\t\t\tlayout[x][y] = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn layout;\r\n\t}\r\n\r\n\tstatic getActive(layers) {\r\n\t\tfor (let i = 0; i < layers.length; i++) if (layers[i].active) return layers[i];\r\n\t}\r\n}\r\n\r\nexport class Grid extends Layer {\r\n\tconstructor(width, height) {\r\n\t\tsuper(\"Grid\", width + 1, height + 1);\r\n\t\tthis.active = false;\r\n\t\tthis.layout = Grid.initGrid(this.width, this.height);\r\n\t\tthis.useDot = false;\r\n\t\tthis.color = \"grey\";\r\n\t\tthis.opacity = 0.4;\r\n\t\tthis.dotSize = 0.12;\r\n\t\tthis.crossSize = 0.05;\r\n\t}\r\n\r\n\tset useDot(value) {\r\n\t\tthis.layout.forEach(subTab => {\r\n\t\t\tsubTab.forEach(gridTile => {\r\n\t\t\t\tgridTile.useDot = value;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tset color(value) {\r\n\t\tthis.layout.forEach(subTab => {\r\n\t\t\tsubTab.forEach(gridTile => {\r\n\t\t\t\tgridTile.color = value;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tset opacity(value) {\r\n\t\tthis.layout.forEach(subTab => {\r\n\t\t\tsubTab.forEach(gridTile => {\r\n\t\t\t\tgridTile.opacity = value;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tset dotSize(value) {\r\n\t\tthis.layout.forEach(subTab => {\r\n\t\t\tsubTab.forEach(gridTile => {\r\n\t\t\t\tgridTile.dotSize = value;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tset crossSize(value) {\r\n\t\tthis.layout.forEach(subTab => {\r\n\t\t\tsubTab.forEach(gridTile => {\r\n\t\t\t\tgridTile.crossSize = value;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tstatic initGrid(width, height) {\r\n\t\tlet grid;\r\n\t\tgrid = new Array(width);\r\n\t\tfor (let x = 0; x < grid.length; x++) {\r\n\t\t\tgrid[x] = new Array(height);\r\n\t\t\tfor (let y = 0; y < grid[x].length; y++) {\r\n\t\t\t\tgrid[x][y] = new GridTile(x, y);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn grid;\r\n\t}\r\n}\r\n","export default class Tool {\r\n    static getActive(tools) {\r\n        for (const [, tool] of Object.entries(tools)) {\r\n            if (tool.active) return tool;\r\n        }\r\n    }\r\n}\r\n","export default class Camera {\r\n\tconstructor() {\r\n\t\tthis.active = false;\r\n\t\tthis.click = { left: false, middle: false, right: false };\r\n\t\tthis.lastMouse = { x: null, y: null };\r\n\t\tthis.scrollSensivity = 0.1;\r\n\t}\r\n\r\n\tonMouseDown(e) {\r\n\t\tif (e.which === 1) this.click.left = true;\r\n\t\telse if (e.which === 2) this.click.middle = true;\r\n\t\telse if (e.which === 3) this.click.right = true;\r\n\t\tthis.lastMouse = { x: e.pageX, y: e.pageY };\r\n\t}\r\n\r\n\tonMouseUp(e) {\r\n\t\tif (e.which === 1) this.click.left = false;\r\n\t\tif (e.which === 2) this.click.middle = false;\r\n\t\tif (e.which === 3) this.click.right = false;\r\n\t\tthis.lastMouse = { x: e.pageX, y: e.pageY };\r\n\t}\r\n\r\n\tonMouseMove(e, state, setState) {\r\n\t\tlet grid = state.grid;\r\n\t\tconst map = state.map;\r\n\t\tconst container = state.container;\r\n\t\tconst lastMouse = this.lastMouse;\r\n\r\n\t\tif (this.click.middle) {\r\n\t\t\tif (\r\n\t\t\t\tgrid.offset.x - (lastMouse.x - e.pageX) > container.width ||\r\n\t\t\t\tgrid.offset.x - (lastMouse.x - e.pageX) < map.width * -grid.size ||\r\n\t\t\t\tgrid.offset.y - (lastMouse.y - e.pageY) > container.height ||\r\n\t\t\t\tgrid.offset.y - (lastMouse.y - e.pageY) < map.height * -grid.size\r\n\t\t\t) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tgrid.offset.x -= lastMouse.x - e.pageX;\r\n\t\t\t\tgrid.offset.y -= lastMouse.y - e.pageY;\r\n\r\n\t\t\t\tthis.lastMouse = { x: e.pageX, y: e.pageY };\r\n\r\n\t\t\t\tsetState({ grid: grid });\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (this.click.left && this.ative) {\r\n\t\t\t//TODO Do somethings\r\n\t\t} else if (this.click.right && this.ative) {\r\n\t\t\t//TODO Do somethings\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonMouseLeave() {\r\n\t\tthis.click.left = false;\r\n\t\tthis.click.middle = false;\r\n\t\tthis.click.right = false;\r\n\t}\r\n\r\n\tonWheel(e, state, setState) {\r\n\t\tconst container = state.container;\r\n\t\tconst mouse = { x: e.pageX, y: e.pageY };\r\n\t\tlet grid = state.grid;\r\n\t\tlet offset = grid.offset;\r\n\t\tconst scrollValue = 1 - Math.sign(e.deltaY) * this.scrollSensivity;\r\n\r\n\t\tconst before = {\r\n\t\t\tx: mouse.x - offset.x - container.offset.x,\r\n\t\t\ty: mouse.y - offset.y - container.offset.y,\r\n\t\t\tgSize: grid.size\r\n\t\t};\r\n\r\n\t\tif (Math.round(grid.size * scrollValue) < grid.minSize) grid.size = grid.minSize;\r\n\t\telse if (Math.round(grid.size * scrollValue) > grid.maxSize) grid.size = grid.maxSize;\r\n\t\telse grid.size = Math.round(grid.size * scrollValue);\r\n\r\n\t\tconst after = {\r\n\t\t\txDif: (before.x * grid.size) / before.gSize,\r\n\t\t\tyDif: (before.y * grid.size) / before.gSize,\r\n\t\t\tgsize: grid.size\r\n\t\t};\r\n\r\n\t\toffset.x += Math.round(before.x - after.xDif);\r\n\t\toffset.y += Math.round(before.y - after.yDif);\r\n\t\tgrid.offset = offset;\r\n\t\tsetState({ grid: grid });\r\n\t}\r\n}\r\n","import Tile from \"../Tile\";\r\nimport { Layer } from \"../Layer\";\r\nimport { getCoordinateAt, getMouseInCanvas } from \"../Helper\";\r\n\r\nexport default class Brush {\r\n\tconstructor(size, sprite) {\r\n\t\tthis.active = false;\r\n\t\tthis.size = size;\r\n\t\tthis.sprite = sprite;\r\n\t\tthis.click = { left: false, right: false };\r\n\t\tthis.lastMouse = { x: null, y: null };\r\n\t}\r\n\r\n\tonMouseDown(e, state, layers) {\r\n\t\tconst mousePos = getMouseInCanvas({ x: e.pageX, y: e.pageY }, state.container);\r\n\t\tconst coordinateAtMouse = getCoordinateAt(mousePos, state.grid);\r\n\r\n\t\tif (e.which === 1) {\r\n\t\t\tthis.click.left = true;\r\n\t\t\tthis.placeAt(coordinateAtMouse, layers);\r\n\t\t} else if (e.which === 3) {\r\n\t\t\tthis.click.right = true;\r\n\t\t\tthis.eraseAt(coordinateAtMouse, layers);\r\n\t\t}\r\n\t\tthis.lastMouse = { x: e.pageX, y: e.pageY };\r\n\t}\r\n\r\n\tonMouseUp(e) {\r\n\t\tif (e.which === 1) this.click.left = false;\r\n\t\tif (e.which === 3) this.click.right = false;\r\n\t}\r\n\r\n\tplaceAt(pos, layers) {\r\n\t\tLayer.getActive(layers).setAt(new Tile(this.sprite, pos.x, pos.y), pos.x, pos.y);\r\n\t}\r\n\r\n\teraseAt(pos, layers) {\r\n\t\tLayer.getActive(layers).eraseAt(pos.x, pos.y);\r\n\t}\r\n\r\n\tonMouseMove(e, state, layers) {\r\n\t\tlet grid = state.grid;\r\n\t\tconst mousePos = getMouseInCanvas({ x: e.pageX, y: e.pageY }, state.container);\r\n\t\tconst coordinateAtMouse = getCoordinateAt(mousePos, grid);\r\n\r\n\t\tif (this.click.left) {\r\n\t\t\tthis.makeLine(\r\n\t\t\t\tgetCoordinateAt(getMouseInCanvas(this.lastMouse, state.container), grid),\r\n\t\t\t\tcoordinateAtMouse,\r\n\t\t\t\tlayers,\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t\tthis.lastMouse = { x: e.pageX, y: e.pageY };\r\n\t\t\treturn true;\r\n\t\t} else if (this.click.right) {\r\n\t\t\tthis.makeLine(\r\n\t\t\t\tgetCoordinateAt(getMouseInCanvas(this.lastMouse, state.container), grid),\r\n\t\t\t\tcoordinateAtMouse,\r\n\t\t\t\tlayers,\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tthis.lastMouse = { x: e.pageX, y: e.pageY };\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonMouseLeave() {\r\n\t\tthis.click.left = false;\r\n\t\tthis.click.right = false;\r\n\t}\r\n\r\n\tmakeLine(start, end, layers, isPlacing) {\r\n\t\tvar difX = end.x - start.x;\r\n\t\tvar difY = end.y - start.y;\r\n\t\tvar dist = Math.abs(difX) + Math.abs(difY);\r\n\t\tif (dist < 0.5) {\r\n\t\t\tif (isPlacing) this.placeAt({ x: Math.floor(start.x), y: Math.floor(start.y) }, layers);\r\n\t\t\telse this.eraseAt({ x: Math.floor(start.x), y: Math.floor(start.y) }, layers);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar dx = difX / dist;\r\n\t\tvar dy = difY / dist;\r\n\r\n\t\tfor (var i = 0, x, y; i <= Math.ceil(dist); i++) {\r\n\t\t\tx = Math.floor(start.x + dx * i);\r\n\t\t\ty = Math.floor(start.y + dy * i);\r\n\t\t\tif (isPlacing) this.placeAt({ x: x, y: y }, layers);\r\n\t\t\telse this.eraseAt({ x: x, y: y }, layers);\r\n\t\t}\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport tileImg from \"../assets/tileset/test.png\";\r\nimport { Layer, Grid } from \"./Layer\";\r\n\r\nimport Tool from \"./Tools/Tool\";\r\nimport Camera from \"./Tools/Camera\";\r\nimport Brush from \"./Tools/Brush\";\r\n\r\nclass EditingArea extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcontainer: {\r\n\t\t\t\tdiv: null,\r\n\t\t\t\tcanvas: null,\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\toffset: { x: null, y: null }\r\n\t\t\t},\r\n\t\t\tgrid: {\r\n\t\t\t\tsize: 50,\r\n\t\t\t\tminSize: 3,\r\n\t\t\t\tmaxSize: 300,\r\n\t\t\t\toffset: { x: 0, y: 0 }\r\n\t\t\t},\r\n\t\t\tmap: {\r\n\t\t\t\twidth: 40,\r\n\t\t\t\theight: 30\r\n\t\t\t},\r\n\t\t\tclick: {\r\n\t\t\t\tleft: false,\r\n\t\t\t\tmiddle: false,\r\n\t\t\t\tright: false\r\n\t\t\t}\r\n\t\t};\r\n\t\t//TODO make the grid as css background\r\n\t\tthis.layers = [\r\n\t\t\tnew Grid(this.state.map.width, this.state.map.height),\r\n\t\t\tnew Layer(\"layer 1\", this.state.map.width, this.state.map.height)\r\n\t\t];\r\n\r\n\t\t//TODO a changer le system de sprite\r\n\t\tlet tile = new Image();\r\n\t\ttile.src = tileImg;\r\n\t\tthis.tools = { brush: new Brush(2, tile), camera: new Camera() };\r\n\t\tthis.tools.brush.active = true;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = this.refs.canvas;\r\n\r\n\t\twindow.addEventListener(\"resize\", this.handleResize.bind(this));\r\n\t\tcanvas.addEventListener(\"wheel\", this.handleWheel.bind(this));\r\n\t\tcanvas.addEventListener(\"mousedown\", this.handleMouseDown.bind(this));\r\n\t\tcanvas.addEventListener(\"mousemove\", this.handleMouseMove.bind(this));\r\n\t\tcanvas.addEventListener(\"mouseup\", this.handleMouseUp.bind(this));\r\n\t\tcanvas.addEventListener(\"mouseleave\", this.handleMouseLeave.bind(this));\r\n\r\n\t\t//disable right click menu\r\n\t\tdocument.oncontextmenu = function() {\r\n\t\t\treturn false;\r\n\t\t};\r\n\r\n\t\tlet container = this.state.container;\r\n\t\tcontainer.canvas = canvas;\r\n\t\tcontainer.div = this.refs.div;\r\n\t\tthis.setState({ container: container });\r\n\r\n\t\tthis.handleResize();\r\n\t\tthis.onStart();\r\n\t}\r\n\r\n\tonStart() {\r\n\t\tlet map = this.state.map;\r\n\t\tlet grid = this.state.grid;\r\n\t\tconst div = this.refs.div;\r\n\r\n\t\tgrid.offset = {\r\n\t\t\tx: Math.round(div.offsetWidth / 2 - (map.width * this.state.grid.size) / 2),\r\n\t\t\ty: Math.round(div.offsetHeight / 2 - (map.height * this.state.grid.size) / 2)\r\n\t\t};\r\n\t\tthis.setState({\r\n\t\t\tgrid: grid\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.updateLayers();\r\n\t}\r\n\r\n\tupdateLayers() {\r\n\t\tconst container = this.state.container;\r\n\t\tconst context = container.canvas.getContext(\"2d\");\r\n\r\n\t\t//Clear canvas\r\n\t\tcontext.clearRect(0, 0, container.width, container.height);\r\n\t\tfor (let i = 0; i < this.layers.length; i++) {\r\n\t\t\tif (this.layers[i].delete) this.layers.splice(i, 1);\r\n\t\t\telse this.layers[i].render(this.state);\r\n\t\t}\r\n\t}\r\n\r\n\thandleResize() {\r\n\t\tconst div = this.refs.div;\r\n\t\tconst w = div.offsetWidth;\r\n\t\tconst h = div.offsetHeight;\r\n\t\tconst containerOffset = { x: div.offsetLeft, y: div.offsetTop };\r\n\r\n\t\tlet container = this.state.container;\r\n\t\tcontainer.width = w;\r\n\t\tcontainer.height = h;\r\n\t\tcontainer.offset = containerOffset;\r\n\r\n\t\tthis.setState({\r\n\t\t\tcontainer: container\r\n\t\t});\r\n\t\tconst canvas = this.refs.canvas;\r\n\t\tcanvas.width = w;\r\n\t\tcanvas.height = h;\r\n\t\tthis.updateLayers();\r\n\t}\r\n\r\n\thandleWheel(e) {\r\n\t\tthis.tools.camera.onWheel(e, this.state, this.setState.bind(this));\r\n\t\tthis.updateLayers();\r\n\t}\r\n\r\n\thandleMouseLeave() {\r\n\t\tTool.getActive(this.tools).onMouseLeave();\r\n\t\tthis.tools.camera.onMouseLeave();\r\n\t}\r\n\r\n\thandleMouseDown(e) {\r\n\t\tTool.getActive(this.tools).onMouseDown(e, this.state, this.layers);\r\n\t\tthis.tools.camera.onMouseDown(e);\r\n\t\tthis.updateLayers();\r\n\t}\r\n\thandleMouseUp(e) {\r\n\t\tTool.getActive(this.tools).onMouseUp(e);\r\n\t\tthis.tools.camera.onMouseUp(e);\r\n\t}\r\n\r\n\thandleMouseMove(e) {\r\n\t\tif (\r\n\t\t\tTool.getActive(this.tools).onMouseMove(e, this.state, this.layers) ||\r\n\t\t\tthis.tools.camera.onMouseMove(e, this.state, this.setState.bind(this))\r\n\t\t)\r\n\t\t\tthis.updateLayers();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"EditingArea\" ref=\"div\">\r\n\t\t\t\t<canvas ref=\"canvas\"></canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditingArea;\r\n","import React from \"react\";\r\n\r\nclass PanelArea extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tname: \"Information\",\r\n\t\t\ttitle: \"How to use\",\r\n\t\t\tdescription:\r\n\t\t\t\t\"Left Click : Place blocks / Right Click : Delete blocks / Middle Click : Pan the camera\"\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\t//TODO faire un sous component qui correspondqu differents objet du panel\r\n\t\treturn (\r\n\t\t\t<div id=\"PanelArea\">\r\n\t\t\t\t<div className=\"header\">\r\n\t\t\t\t\t<h1>{this.state.name}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"body\">\r\n\t\t\t\t\t<h2>{this.state.title}</h2>\r\n\t\t\t\t\t<p>{this.state.description}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default PanelArea;\r\n","import React from \"react\";\r\nimport frame_cross from \"./assets/frame/cross.svg\";\r\n\r\nclass TitleArea extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttitle: \"â€¢ This is a test.map\"\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.refs.minimize.addEventListener(\"click\", this.onMinimize);\r\n\t\tthis.refs.maximize.addEventListener(\"click\", this.onMaximize);\r\n\t\tthis.refs.close.addEventListener(\"click\", this.onClose);\r\n\t}\r\n\r\n\tonMinimize() {\r\n\t\t//const win = remote.getCurrentWindow();\r\n\t\t//win.minimize();\r\n\t}\r\n\r\n\tonMaximize() {\r\n\t\t// var win = remote.getCurrentWindow();\r\n\t\t// if (!win.isMaximized()) win.maximize();\r\n\t\t// else win.unmaximize();\r\n\t}\r\n\r\n\tonClose() {\r\n\t\t//const win = remote.getCurrentWindow();\r\n\t\t//win.close();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"TitleArea\">\r\n\t\t\t\t<div className=\"drag\"></div>\r\n\t\t\t\t<p className=\"title\">{this.state.title}</p>\r\n\t\t\t\t<div className=\"iconContainer\">\r\n\t\t\t\t\t<img ref=\"minimize\" src={frame_cross} alt=\"\" />\r\n\t\t\t\t\t<img ref=\"maximize\" src={frame_cross} alt=\"\" />\r\n\t\t\t\t\t<img ref=\"close\" src={frame_cross} alt=\"\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TitleArea;\r\n","import React from \"react\";\r\n\r\nclass ToolBarArea extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"ToolBarArea\">\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t\t<TileButton />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass TileButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"TileButton\">\r\n\t\t\t\t<button>IMG</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ToolBarArea;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./style/index.css\";\r\n\r\nimport EditingArea from \"./Editing/EditingArea.js\";\r\nimport PanelArea from \"./PanelArea\";\r\nimport TitleArea from \"./TitleArea\";\r\nimport ToolBarArea from \"./ToolBarArea\";\r\n\r\nclass App extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"App\">\r\n\t\t\t\t<EditingArea />\r\n\t\t\t\t<TitleArea />\r\n\t\t\t\t<ToolBarArea />\r\n\t\t\t\t<PanelArea />\r\n\t\t\t\t<div id=\"StatusBarArea\"></div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n//const map = {\r\n//\tname: \"TestingMap\",\r\n//\tsize: { x: 30, y: 40 },\r\n//\tbackground: \"Forest\",\r\n//\tlayers: [\r\n//\t\t{\r\n//\t\t\tname: \"layer1\",\r\n//\t\t\tindex: 1,\r\n//\t\t\tvisible: true,\r\n//\t\t\ttype: \"solid\",\r\n//\t\t\ttiles: [\r\n//\t\t\t\t{ x: 3, y: 6, texture: \"grass\", type: \"solidBlock\", visible: true },\r\n//\t\t\t\t{ x: 13, y: 3, texture: \"grass\", type: \"solidBlock\", visible: true },\r\n//\t\t\t\t{ x: 4, y: 6, texture: \"grass\", type: \"solidBlock\", visible: true },\r\n//\t\t\t\t{ x: 1, y: 2, texture: \"grass\", type: \"solidBlock\", visible: true }\r\n//\t\t\t]\r\n//\t\t},\r\n//\t\t{\r\n//\t\t\tname: \"layer2\",\r\n//\t\t\tindex: 0,\r\n//\t\t\tvisible: true,\r\n//\t\t\ttype: \"decoration\",\r\n//\t\t\ttiles: [\r\n//\t\t\t\t{ x: 5, y: 5, texture: \"grass\", type: \"notInterative\", visible: true },\r\n//\t\t\t\t{ x: 6, y: 6, texture: \"grass\", type: \"notInterative\", visible: true },\r\n//\t\t\t\t{ x: 7, y: 7, texture: \"grass\", type: \"notInterative\", visible: true }\r\n//\t\t\t]\r\n//\t\t}\r\n//\t]\r\n//};\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n","module.exports = __webpack_public_path__ + \"static/media/cross.fcc611d3.svg\";","module.exports = __webpack_public_path__ + \"static/media/test.7912874a.png\";"],"sourceRoot":""}